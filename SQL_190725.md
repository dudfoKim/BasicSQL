# SQL Basic _ '19.07.25 (서브쿼리)
    
    1. 알려지지 않는 기준을 활용하기 위해 SQL문 안에 또 다른 SQL문을 사용하는 것을 말한다.
    2. 서브쿼리는 메인쿼리의 칼럼을 모두 사용할 수 있지만, 메인쿼리는 서브쿼리의 칼럼을 사용할 수 없다.
    3. INLINE VIEW : FROM절 상에 오는 서브쿼리로 뷰처럼 작용한다.
    4. 서브쿼리가 여러 행을 반환할 때는 IN, ANY, ALL 연산자를 활용한다.
    5. 서브쿼리를 이용하면 행뿐만 아니라 열을 리턴할 수도 있다.
    
    
   * 단일행 서브쿼리

    SELECT ename, sal
    FROM emp
    WHERE sal > (SELECT sal
                 FROM emp
                 WHERE empno = '7566'
                );
    
    // 결과 => 사번이 7556인 사원보다 월급을 많이 받는 사원 조회
    ENAME      SAL                    
    ---------- ---------------------- 
    SCOTT      3000                   
    KING       5000                   
    FORD       3000                    
    
    SELECT deptno as "부서명", min(sal) as "부서별 최소급여"
    FROM emp
    GROUP BY deptno
    HAVING min(sal) > (SELECT min(sal)
                       FROM emp
                       WHERE deptno = '20'
                      );

    // 결과 => 부서명이 20인 사원의 최소월급보다는 큰 최소월급을 받는 사원이 있는 부서를 조회
    부서명                    부서별 최소급여               
    ---------------------- ---------------------- 
    30                     950                    
    10                     1300                   
    
    
   * 다중행 서브쿼리
   
    SELECT ename, sal, job, hiredate, deptno
    FROM emp
    WHERE job != 'SALESMAN' 
    and sal> ALL (SELECT sal
                  FROM emp
                  WHERE job = 'SALESMAN'
                 );
                 
    // 결과 => 직군이 SALESMAN인 모든 사원보다 월급을 많이 받는 사원을 조회
    ENAME      SAL                    JOB       HIREDATE                  DEPTNO                 
    ---------- ---------------------- --------- ------------------------- ---------------------- 
    CLARK      2450                   MANAGER   01/01/09                  10                     
    BLAKE      2850                   MANAGER   01/05/01                  30                     
    JONES      2975                   MANAGER   01/04/02                  20                     
    SCOTT      3000                   ANALYST   02/12/09                  20                     
    FORD       3000                   ANALYST   01/12/03                  20                     
    KING       5000                   PRESIDENT 01/11/17                  10                     
    
    cf. 다중행 서브쿼리를 단일 행 서브쿼리로 변환(SALESMAN의 최대 월급보다 높은 사원을 조회)
    SELECT ename, sal, job, hiredate, deptno
    FROM emp
    WHERE job != 'SALESMAN' 
    and sal> (SELECT max(sal)
              FROM emp
              WHERE job = 'SALESMAN'
             );
    
