# SQL Basic _ '19.07.23

* 단일 행 함수

      1. 인자(Parameter)를 받아들여 행 1개를 결과로 반환한다.
      2. SELECT, WHERE, ORDER BY 절에 사용한다.
      3. 중첩사용이 가능하고 데이터 타입을 변경할 수 있다.
          
      cf. DB Character Set 확인
          
      SELECT parameter, value
      FROM nls_database_parameters
      WHERE parameter = 'NLS_CHARACTERSET';
      
* 단일 행 함수 - 문자함수

      1. LOWER, UPPER, INITCAP, CONCAT
      
      SELECT CONCAT(ename, ', JOB : ') as "NAME", LOWER(job), UPPER(job), INITCAP(job)
      FROM emp
      WHERE deptno = 10;
     
      // 결과
      NAME               LOWER(JOB) UPPER(JOB) INITCAP(JOB) 
      ------------------ ---------- ---------- ------------ 
      CLARK, JOB :       manager    MANAGER    Manager      
      KING, JOB :        president  PRESIDENT  President    
      MILLER, JOB :      clerk      CLERK      Clerk   
          
          
      2. LENGTH, SUBSTR, INSTR

      SELECT ename, job, INSTR(ename, 'K', length(ename)-1)
      FROM emp
      WHERE SUBSTR(ename, length(ename)-1, 1) = 'K';
        
      // 결과
      ENAME      JOB       K index                
      ---------- --------- ---------------------- 
      BLAKE      MANAGER   4  

      
      3. PAD, TRIM, REPLACE
      
      SELECT replace(ename, 'S', '*') as "이름 'S' 대체", rtrim(job, 'T') "직업 'T' 삭제" , rpad(sal, 7, '-') as "연봉 '*' 채우기"
      FROM emp
      WHERE deptno = '20';
      
      // 결과
      이름'S'대체 직업'T'삭제 연봉'*'보호 
      ---------- --------- --------- 
      *MITH      CLERK     800----   
      JONE*      MANAGER   2975---   
      *COTT      ANALYS    3000---   
      ADAM*      CLERK     1100---   
      FORD       ANALYS    3000---
      
      4. REPLACE, TRANSALTE
      
      SELECT
      

* 단일 행 함수 - 숫자함수

      1. SQRT, ROUND, MOD, SIGN

      SELECT sal as "원래 값", ROUND(SQRT(sal), 0) as "제곱근과 반올림", MOD(sal,10) as "Modular연산(%10)", SIGN(sal-2975)  as "대소비교 활용" 
      FROM emp
      WHERE deptno = 20;
      
      // 결과
      원래 값                   제곱근과 반올림               Modular연산(%10)         대소비교 활용                
      ---------------------- ---------------------- ---------------------- ---------------------- 
      800                    28                     0                      -1                     
      2975                   55                     5                      0                      
      3000                   55                     0                      1                      
      1100                   33                     0                      -1                     
      3000                   55                     0                      1
      
      2. FLOOR, CEIL, ABS, POWER
      
      SELECT floor(-4.9) as "작은 절대값 정수",  ceil(-4.9) as "큰 절대값 정수",  abs(-4.9) "절대값", power(2, 3) "2의 3제곱"
      FROM dual;
      
      // 결과
      작은 절대값 정수              큰 절대값 정수               절대값                    2의 3제곱                 
      ---------------------- ---------------------- ---------------------- ---------------------- 
      -5                     -4                     4.9                    8 
      
      
* 단일 행 함수 - 날짜함수

      1. DB 날짜 포맷 조회
      
      SELECT value AS "날짜 포맷 조회"
      FROM nls_session_parameters
      WHERE parameter in ('NLS_DATE_FORMAT','NLS_TIMESTAMP_FORMAT', 'NLS_TIMESTAMP_TZ_FORMAT', 'NLS_DATE_LANGUAGE');
      
      // 결과
      날짜 포맷 조회                                 
      ---------------------------------------- 
      RR/MM/DD                                 
      KOREAN                                   
      RR/MM/DD HH24:MI:SSXFF                   
      RR/MM/DD HH24:MI:SSXFF TZR 


      2. Date, Timestamp, Timestamp with timezone
      
      SELECT sysdate, localtimestamp, systimestamp
      FROM dual;
      
      // 결과
      SYSDATE                   LOCALTIMESTAMP            SYSTIMESTAMP  
      ------------------------- ------------------------- ------------- 
      19/07/23                  19/07/23 11:53:29.334692000 19/07/23 11:53:29.334691000 +09:00 
      
      
      
